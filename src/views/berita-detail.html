<div id="berita-detail-page">
  <!-- Hero Section -->
  <section class="hero-section position-relative" v-if="event"
    :style="`background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${event.image}') center/cover;`">
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="text-white">
            <div class="mb-3">
              <span class="badge bg-primary me-2">{{ getEventTypeLabel(event.type) }}</span>
              <span class="badge bg-light text-dark" v-if="event.fee">{{ event.fee }}</span>
            </div>
            <h1 class="display-4 fw-bold mb-3">{{ event.title }}</h1>
            <div class="d-flex flex-wrap gap-4 text-white-50">
              <div class="d-flex align-items-center">
                <i class="bi bi-calendar-event me-2"></i>
                <span v-if="event.endDate">
                  {{ formatDateRange(event.date, event.endDate) }}
                </span>
                <span v-else>{{ formatDate(event.date) }}</span>
              </div>
              <div class="d-flex align-items-center" v-if="event.time">
                <i class="bi bi-clock me-2"></i>
                <span>{{ event.time }}</span>
              </div>
              <div class="d-flex align-items-center" v-if="event.location">
                <i class="bi bi-geo-alt me-2"></i>
                <span>{{ event.location }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <div v-if="loading" class="container py-5 text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3 text-muted">Memuat detail event...</p>
  </div>

  <!-- Error State -->
  <div v-else-if="error" class="container py-5">
    <div class="alert alert-warning" role="alert">
      <h4 class="alert-heading">Event tidak ditemukan</h4>
      <p>{{ error }}</p>
      <hr>
      <button @click="navigateTo('berita')" class="btn btn-primary">
        <i class="bi bi-arrow-left me-2"></i>Kembali ke Berita & Event
      </button>
    </div>
  </div>

  <!-- Event Detail Content -->
  <section v-else-if="event" class="py-5">
    <div class="container">
      <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
          <!-- Description -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body p-4">
              <h2 class="h4 fw-bold mb-3">Tentang Event</h2>
              <p class="text-muted mb-0">{{ event.description }}</p>
            </div>
          </div>

          <!-- Highlights -->
          <div class="card border-0 shadow-sm mb-4" v-if="event.highlights && event.highlights.length > 0">
            <div class="card-body p-4">
              <h2 class="h4 fw-bold mb-3">Yang Akan Kamu Dapatkan</h2>
              <ul class="list-unstyled mb-0">
                <li v-for="(highlight, index) in event.highlights" :key="index" class="mb-2">
                  <i class="bi bi-check-circle-fill text-success me-2"></i>
                  <span>{{ highlight }}</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- University Info (if available) -->
          <div class="card border-0 shadow-sm mb-4" v-if="event.university">
            <div class="card-body p-4">
              <h2 class="h4 fw-bold mb-3">Informasi Universitas</h2>
              <p class="text-muted mb-0">
                <strong>{{ event.university }}</strong>
              </p>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
          <!-- Registration Card -->
          <div class="card border-0 shadow-sm mb-4 sticky-top" style="top: 100px;">
            <div class="card-body p-4">
              <h3 class="h5 fw-bold mb-3">Informasi Pendaftaran</h3>

              <!-- Fee -->
              <div class="mb-3">
                <small class="text-muted d-block mb-1">Biaya</small>
                <p class="fw-bold mb-0">{{ event.fee || 'Gratis' }}</p>
              </div>

              <!-- Deadline -->
              <div class="mb-3" v-if="event.deadline">
                <small class="text-muted d-block mb-1">Batas Pendaftaran</small>
                <p class="fw-bold mb-0">{{ formatDate(event.deadline) }}</p>
              </div>

              <!-- Days Until Event -->
              <div class="alert alert-info mb-3" v-if="isEventUpcoming(event.date)">
                <i class="bi bi-clock-history me-2"></i>
                <strong>{{ getDaysUntil(event.date) }}</strong>
              </div>

              <!-- Registration Button -->
              <button @click="registerEvent(event)" class="btn btn-primary w-100 mb-2">
                <i class="bi bi-calendar-check me-2"></i>Daftar Sekarang
              </button>

              <!-- Share Buttons -->
              <div class="d-flex gap-2 mt-3">
                <button class="btn btn-outline-secondary btn-sm flex-fill" @click="shareEvent('facebook')">
                  <i class="bi bi-facebook"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm flex-fill" @click="shareEvent('twitter')">
                  <i class="bi bi-twitter"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm flex-fill" @click="shareEvent('whatsapp')">
                  <i class="bi bi-whatsapp"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm flex-fill" @click="shareEvent('copy')">
                  <i class="bi bi-link-45deg"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Events -->
      <div class="mt-5" v-if="relatedEvents.length > 0">
        <h2 class="h3 fw-bold mb-4">Event Lainnya</h2>
        <div class="row g-4">
          <div class="col-md-6 col-lg-4" v-for="relatedEvent in relatedEvents" :key="relatedEvent.id">
            <div class="card h-100 border-0 shadow-sm">
              <img :src="relatedEvent.image" :alt="relatedEvent.title" class="card-img-top" style="height: 200px; object-fit: cover;">
              <div class="card-body">
                <div class="mb-2">
                  <span class="badge bg-primary">{{ getEventTypeLabel(relatedEvent.type) }}</span>
                </div>
                <h3 class="h6 fw-bold mb-2">{{ relatedEvent.title }}</h3>
                <p class="card-text small text-muted mb-3">{{ truncateText(relatedEvent.description, 100) }}</p>
                <div class="d-flex justify-content-between align-items-center">
                  <small class="text-muted">
                    <i class="bi bi-calendar-event me-1"></i>
                    {{ formatDateShort(relatedEvent.date) }}
                  </small>
                  <button @click="viewEventDetail(relatedEvent.id)" class="btn btn-sm btn-outline-primary">
                    Detail
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Back Button -->
      <div class="mt-5 text-center">
        <button @click="navigateTo('berita')" class="btn btn-outline-primary">
          <i class="bi bi-arrow-left me-2"></i>Kembali ke Berita & Event
        </button>
      </div>
    </div>
  </section>
</div>
