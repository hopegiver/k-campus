<div class="page-content">
  <!-- Loading State -->
  <div v-if="loading" class="container py-5 text-center">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3 text-muted">Memuat detail universitas...</p>
  </div>

  <!-- Error State -->
  <div v-else-if="error || !university" class="container py-5">
    <div class="alert alert-warning" role="alert">
      <h4 class="alert-heading">Universitas tidak ditemukan</h4>
      <p>{{ error || 'Data universitas tidak tersedia' }}</p>
      <hr>
      <button @click="navigateTo('universitas')" class="btn btn-primary">
        <i class="bi bi-arrow-left me-2"></i>Kembali ke Daftar Universitas
      </button>
    </div>
  </div>

  <!-- Hero Section -->
  <section v-else class="hero-gradient hero-university" :style="{ backgroundImage: university.image ? 'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(' + university.image + ')' : '' }">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-4">
          <li class="breadcrumb-item"><a @click.prevent="navigateTo('home')" class="text-white">Beranda</a></li>
          <li class="breadcrumb-item"><a @click.prevent="navigateTo('universitas')" class="text-white">Universitas</a></li>
          <li class="breadcrumb-item active text-white-50" aria-current="page">{{ university.name }}</li>
        </ol>
      </nav>

      <div class="row align-items-center">
        <div class="col-md-8">
          <div>
            <h1 class="display-5 fw-bold mb-3">{{ university.name }}</h1>
            <p class="lead mb-3">
              <span class="me-3">üìç {{ university.location }}</span>
              <span class="me-3">üèõÔ∏è {{ university.type }}</span>
              <span v-if="university.ranking" class="badge bg-light text-primary">{{ university.ranking }}</span>
            </p>
            <div class="d-flex gap-2 flex-wrap">
              <span v-if="university.isAccredited" class="badge bg-success">Terakreditasi Internasional</span>
              <span v-if="university.hasScholarship" class="badge bg-warning text-dark">Beasiswa Tersedia</span>
            </div>
          </div>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
          <button @click="toggleFavorite" class="btn btn-outline-light me-2">
            {{ isFavorited ? 'Tersimpan' : 'Simpan' }}
          </button>
          <button @click="navigateTo('konsultasi')" class="btn btn-light">
            Konsultasi Gratis
          </button>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="row g-3 mt-4">
        <div class="col-6 col-md-3">
          <div class="card bg-white bg-opacity-10 border-0 text-white">
            <div class="card-body text-center">
              <div class="h3 fw-bold mb-0">{{ university.totalStudents }}</div>
              <div class="small">Total Mahasiswa</div>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card bg-white bg-opacity-10 border-0 text-white">
            <div class="card-body text-center">
              <div class="h3 fw-bold mb-0">{{ university.internationalStudents }}</div>
              <div class="small">Mahasiswa Internasional</div>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card bg-white bg-opacity-10 border-0 text-white">
            <div class="card-body text-center">
              <div class="h3 fw-bold mb-0">{{ university.totalFaculty }}</div>
              <div class="small">Total Pengajar</div>
            </div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card bg-white bg-opacity-10 border-0 text-white">
            <div class="card-body text-center">
              <div class="h3 fw-bold mb-0">{{ university.totalPrograms }}</div>
              <div class="small">Program Studi</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tab Navigation -->
  <section class="bg-white sticky-top" style="top: var(--header-height); z-index: 1020; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);">
    <div class="container">
      <ul class="nav nav-tabs">
        <li class="nav-item" v-for="tab in tabs" :key="tab.id">
          <button
            @click="activeTab = tab.id"
            :class="['nav-link', { active: activeTab === tab.id }]"
          >
            {{ tab.label }}
          </button>
        </li>
      </ul>
    </div>
  </section>

  <!-- Tab Content -->
  <section class="py-5">
    <div class="container">
      <!-- Tab: Basic Info -->
      <div v-if="activeTab === 'basic'" class="row g-4">
        <div class="col-lg-8">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Tentang Universitas</h2>
              <p>{{ university.description }}</p>
              <p>{{ university.longDescription }}</p>
            </div>
          </div>

          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Keunggulan</h2>
              <ul class="list-unstyled">
                <li v-for="(feature, index) in university.features" :key="index" class="mb-2">
                  <span class="text-success me-2">‚úì</span>
                  <span>{{ feature }}</span>
                </li>
              </ul>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Fasilitas Kampus</h2>
              <div class="row g-3">
                <div v-for="facility in university.facilities" :key="facility" class="col-md-6">
                  <div class="p-3 bg-light rounded">{{ facility }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Informasi Kontak</h3>
              <div class="mb-3">
                <div class="text-muted small mb-1">Email</div>
                <div>{{ university.contact.email }}</div>
              </div>
              <div class="mb-3">
                <div class="text-muted small mb-1">Telepon</div>
                <div>{{ university.contact.phone }}</div>
              </div>
              <div class="mb-3">
                <div class="text-muted small mb-1">Website</div>
                <a :href="university.contact.website" target="_blank" class="text-primary text-break">
                  {{ university.contact.website ? university.contact.website.replace('https://', '').replace('http://', '').replace('www.', '') : '-' }}
                </a>
              </div>
              <div>
                <div class="text-muted small mb-1">Alamat</div>
                <div>{{ university.contact.address }}</div>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Lokasi</h3>
              <p><strong>Kota:</strong> {{ university.location }}</p>
              <p class="mb-0"><strong>Wilayah:</strong> {{ university.region }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Programs -->
      <div v-if="activeTab === 'programs'">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h3 fw-bold text-primary mb-4">Program Studi yang Tersedia</h2>

            <div v-for="level in ['bachelor', 'master', 'doctoral']" :key="level" class="mb-5">
              <h3 class="h4 fw-bold mb-3">
                {{ level === 'bachelor' ? 'Program Sarjana (S1)' : level === 'master' ? 'Program Magister (S2)' : 'Program Doktoral (S3)' }}
              </h3>

              <div v-if="university.programs && university.programs[level]">
                <div v-for="(college, collegeName) in university.programs[level]" :key="collegeName" class="mb-4">
                  <h4 class="h6 fw-bold text-secondary mb-3">{{ collegeName }}</h4>
                  <div class="row g-2">
                    <div v-for="major in college" :key="major" class="col-md-6">
                      <div class="p-2 bg-light rounded small">{{ major }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Admission -->
      <div v-if="activeTab === 'admission'" class="row g-4">
        <div class="col-lg-8">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Persyaratan Pendaftaran</h2>

              <div class="mb-4">
                <h3 class="h5 fw-bold">Program Sarjana (S1)</h3>
                <ul>
                  <li v-for="req in university.admission.bachelor" :key="req">{{ req }}</li>
                </ul>
              </div>

              <div class="mb-4">
                <h3 class="h5 fw-bold">Program Magister (S2)</h3>
                <ul>
                  <li v-for="req in university.admission.master" :key="req">{{ req }}</li>
                </ul>
              </div>

              <div class="mb-4">
                <h3 class="h5 fw-bold">Program Doktoral (S3)</h3>
                <ul>
                  <li v-for="req in university.admission.doctoral" :key="req">{{ req }}</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Dokumen yang Diperlukan</h2>
              <ul>
                <li v-for="doc in university.requiredDocuments" :key="doc">{{ doc }}</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Jadwal Pendaftaran</h3>
              <div class="mb-3 p-3 bg-light rounded">
                <div class="fw-bold mb-1">Semester Musim Semi (Maret)</div>
                <div class="small text-muted">Pendaftaran: November - Desember</div>
              </div>
              <div class="p-3 bg-light rounded">
                <div class="fw-bold mb-1">Semester Musim Gugur (September)</div>
                <div class="small text-muted">Pendaftaran: Mei - Juni</div>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Biaya Pendaftaran</h3>
              <p class="h4 text-primary fw-bold">{{ formatCurrency(university.applicationFee) }}</p>
              <p class="small text-muted mb-0">*Biaya tidak dapat dikembalikan</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Tuition -->
      <div v-if="activeTab === 'tuition'">
        <div class="card border-0 shadow-sm mb-4">
          <div class="card-body">
            <h2 class="h3 fw-bold text-primary mb-4">Biaya Kuliah per Semester</h2>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="table-light">
                  <tr>
                    <th>Program</th>
                    <th>Biaya Minimum</th>
                    <th>Biaya Maksimum</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(tuition, level) in university.tuitionByLevel" :key="level">
                    <td>{{ getLevelLabel(level) }}</td>
                    <td>{{ formatCurrency(tuition.min) }}</td>
                    <td>{{ formatCurrency(tuition.max) }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="alert alert-info mt-4">
              <strong>Catatan:</strong>
              <ul class="mb-0 mt-2">
                <li>Biaya kuliah dapat bervariasi tergantung program studi</li>
                <li>Program kedokteran, teknik, dan seni biasanya memiliki biaya lebih tinggi</li>
                <li>Biaya tidak termasuk buku, asuransi kesehatan, dan biaya hidup</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h3 fw-bold text-primary mb-4">Biaya Lainnya</h2>
            <div class="row g-3">
              <div class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted mb-1">Biaya Pendaftaran</div>
                  <div class="fw-bold">{{ formatCurrency(university.applicationFee) }}</div>
                </div>
              </div>
              <div v-if="university.insuranceFee" class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted mb-1">Asuransi Kesehatan (per tahun)</div>
                  <div class="fw-bold">{{ formatCurrency(university.insuranceFee) }}</div>
                </div>
              </div>
              <div v-if="university.dormitoryFee" class="col-md-4">
                <div class="p-3 bg-light rounded">
                  <div class="small text-muted mb-1">Asrama (per bulan)</div>
                  <div class="fw-bold">{{ formatCurrency(university.dormitoryFee) }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Scholarships -->
      <div v-if="activeTab === 'scholarships'">
        <div class="card border-0 shadow-sm">
          <div class="card-body">
            <h2 class="h3 fw-bold text-primary mb-4">Program Beasiswa</h2>

            <div v-if="university.scholarships && university.scholarships.length > 0" class="row g-4">
              <div v-for="scholarship in university.scholarships" :key="scholarship.name" class="col-md-6">
                <div class="card h-100 border-primary border-2">
                  <div class="card-body">
                    <h3 class="h5 fw-bold text-primary">{{ scholarship.name }}</h3>
                    <p>{{ scholarship.description }}</p>
                    <div class="mb-2">
                      <span class="text-muted small">Tingkat Cakupan:</span>
                      <div class="fw-bold">{{ scholarship.coverage }}</div>
                    </div>
                    <div class="mb-2">
                      <span class="text-muted small">Persyaratan:</span>
                      <div>{{ scholarship.requirements }}</div>
                    </div>
                    <div v-if="scholarship.deadline">
                      <span class="text-muted small">Batas Waktu:</span>
                      <div>{{ scholarship.deadline }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div v-else class="text-center py-5 text-muted">
              <p>Informasi beasiswa sedang diperbarui. Silakan hubungi universitas untuk informasi lebih lanjut.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Dormitory -->
      <div v-if="activeTab === 'dormitory'" class="row g-4">
        <div class="col-lg-8">
          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Fasilitas Asrama</h2>

              <div v-if="university.dormitory">
                <p>{{ university.dormitory.description }}</p>

                <h3 class="h5 fw-bold mt-4 mb-3">Kapasitas & Ketersediaan</h3>
                <ul>
                  <li><strong>Total Kapasitas:</strong> {{ university.dormitory.capacity }} mahasiswa</li>
                  <li><strong>Prioritas:</strong> {{ university.dormitory.priority }}</li>
                  <li><strong>Jarak ke Kampus:</strong> {{ university.dormitory.distance }}</li>
                </ul>

                <h3 class="h5 fw-bold mt-4 mb-3">Fasilitas Kamar</h3>
                <div class="row g-2">
                  <div v-for="facility in university.dormitory.roomFacilities" :key="facility" class="col-md-6">
                    <div class="p-2 bg-light rounded small">{{ facility }}</div>
                  </div>
                </div>

                <h3 class="h5 fw-bold mt-4 mb-3">Fasilitas Umum</h3>
                <div class="row g-2">
                  <div v-for="facility in university.dormitory.commonFacilities" :key="facility" class="col-md-6">
                    <div class="p-2 bg-light rounded small">{{ facility }}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Tipe Kamar & Biaya</h3>
              <div v-if="university.dormitory && university.dormitory.roomTypes">
                <div v-for="room in university.dormitory.roomTypes" :key="room.type" class="mb-3 p-3 bg-light rounded">
                  <div class="fw-bold">{{ room.type }}</div>
                  <div class="text-primary">{{ formatCurrency(room.price) }}/bulan</div>
                </div>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Kafetaria</h3>
              <div v-if="university.dormitory && university.dormitory.cafeteria">
                <p>{{ university.dormitory.cafeteria.description }}</p>
                <p class="mb-0"><strong>Jam Operasional:</strong> {{ university.dormitory.cafeteria.hours }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Language Institute -->
      <div v-if="activeTab === 'language'" class="row g-4">
        <div class="col-lg-8">
          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h2 class="h3 fw-bold text-primary mb-4">Program Bahasa Korea</h2>

              <div v-if="university.languageInstitute">
                <p>{{ university.languageInstitute.description }}</p>

                <h3 class="h5 fw-bold mt-4 mb-3">Informasi Program</h3>
                <ul>
                  <li><strong>Durasi Program:</strong> {{ university.languageInstitute.duration }}</li>
                  <li><strong>Jam Belajar:</strong> {{ university.languageInstitute.hoursPerWeek }} jam/minggu</li>
                  <li><strong>Ukuran Kelas:</strong> {{ university.languageInstitute.classSize }}</li>
                  <li><strong>Level:</strong> {{ university.languageInstitute.levels }}</li>
                </ul>

                <h3 class="h5 fw-bold mt-4 mb-3">Jadwal Pendaftaran</h3>
                <div class="d-flex gap-2 flex-wrap">
                  <div v-for="intake in university.languageInstitute.intakes" :key="intake" class="badge bg-primary fs-6 p-2">
                    {{ intake }}
                  </div>
                </div>

                <h3 class="h5 fw-bold mt-4 mb-3">Kurikulum</h3>
                <ul>
                  <li v-for="item in university.languageInstitute.curriculum" :key="item">{{ item }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Biaya Program</h3>
              <div v-if="university.languageInstitute">
                <p class="h3 text-primary fw-bold mb-0">{{ formatCurrency(university.languageInstitute.tuition) }}</p>
                <p class="text-muted small">per semester (10 minggu)</p>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm">
            <div class="card-body">
              <h3 class="h5 fw-bold text-primary mb-4">Fasilitas</h3>
              <ul v-if="university.languageInstitute">
                <li v-for="facility in university.languageInstitute.facilities" :key="facility">{{ facility }}</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
