<div class="page-content">
  <!-- Hero Section -->
  <section class="hero-gradient hero-universitas">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-4">
          <li class="breadcrumb-item"><a @click.prevent="navigateTo('home')" class="text-white">Beranda</a></li>
          <li class="breadcrumb-item active text-white-50" aria-current="page">Universitas</li>
        </ol>
      </nav>
      <h1 class="display-4 fw-bold mb-3">Temukan Universitas Impian Anda di Korea</h1>
      <p class="lead mb-0">
        Jelajahi {{ totalUniversities }} universitas terbaik di Korea dengan program studi yang sesuai dengan minat Anda
      </p>
    </div>
  </section>

  <!-- Main Content Section -->
  <section class="py-5">
    <div class="container">

      <!-- Quick Search -->
      <div class="mb-5">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="input-group input-group-lg shadow-sm">
              <input
                type="text"
                v-model="quickSearch"
                @input="applyFilters"
                placeholder="Cari nama universitas atau program studi..."
                class="form-control border-primary"
              >
              <button @click="applyFilters" class="btn btn-primary">
                Cari
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters & Results Section -->
      <div class="row g-4">

        <!-- Filters Sidebar -->
        <div class="col-lg-3">
          <div class="card border-0 shadow-sm sticky-top" style="top: 20px;">
            <div class="card-header bg-light border-0 d-flex justify-content-between align-items-center py-3">
              <h6 class="mb-0 fw-bold text-primary">Filter Pencarian</h6>
              <button @click="resetFilters" class="btn btn-sm btn-outline-primary px-2 py-1" style="font-size: 0.8rem;">Reset</button>
            </div>

            <div class="card-body">
              <!-- Region Filter -->
              <div class="mb-4">
                <h6 class="fw-bold text-dark mb-3">Wilayah</h6>
                <div class="d-flex flex-column gap-2">
                  <div v-for="region in regions" :key="region" class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      :id="'region-' + region"
                      :value="region"
                      v-model="filters.regions"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" :for="'region-' + region">
                      {{ region }}
                    </label>
                  </div>
                </div>
              </div>

              <!-- Degree Level Filter -->
              <div class="mb-4">
                <h6 class="fw-bold text-dark mb-3">Jenjang Pendidikan</h6>
                <div class="d-flex flex-column gap-2">
                  <div v-for="level in degreeLevels" :key="level" class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      :id="'level-' + level"
                      :value="level"
                      v-model="filters.levels"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" :for="'level-' + level">
                      {{ level }}
                    </label>
                  </div>
                </div>
              </div>

              <!-- University Type Filter -->
              <div class="mb-4">
                <h6 class="fw-bold text-dark mb-3">Jenis Universitas</h6>
                <div class="d-flex flex-column gap-2">
                  <div v-for="type in universityTypes" :key="type" class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      :id="'type-' + type"
                      :value="type"
                      v-model="filters.types"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" :for="'type-' + type">
                      {{ type }}
                    </label>
                  </div>
                </div>
              </div>

              <!-- Tuition Range Filter -->
              <div class="mb-4">
                <h6 class="fw-bold text-dark mb-3">Biaya Kuliah (per semester)</h6>
                <div class="d-flex flex-column gap-2">
                  <div v-for="range in tuitionRanges" :key="range.value" class="form-check">
                    <input
                      type="radio"
                      class="form-check-input"
                      name="tuition"
                      :id="'tuition-' + range.value"
                      :value="range.value"
                      v-model="filters.tuitionRange"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" :for="'tuition-' + range.value">
                      {{ range.label }}
                    </label>
                  </div>
                </div>
              </div>

              <!-- Features Filter -->
              <div class="mb-4">
                <h6 class="fw-bold text-dark mb-3">Fasilitas & Program</h6>
                <div class="d-flex flex-column gap-2">
                  <div class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="scholarship-check"
                      v-model="filters.hasScholarship"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" for="scholarship-check">
                      Beasiswa Tersedia
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="english-check"
                      v-model="filters.hasEnglishProgram"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" for="english-check">
                      Program Bahasa Inggris
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="dormitory-check"
                      v-model="filters.hasDormitory"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" for="dormitory-check">
                      Asrama Tersedia
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="language-check"
                      v-model="filters.hasLanguageInstitute"
                      @change="applyFilters"
                    >
                    <label class="form-check-label" for="language-check">
                      Institut Bahasa Korea
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Results Area -->
        <div class="col-lg-9">
          <!-- Loading State -->
          <div v-if="loading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Memuat...</span>
            </div>
            <p class="mt-3 text-muted">Memuat data universitas...</p>
          </div>

          <!-- Sort & View Options -->
          <div v-if="!loading" class="card border-0 shadow-sm mb-4">
            <div class="card-body py-3 d-flex justify-content-between align-items-center flex-wrap gap-3">
              <div class="small">
                Menampilkan <strong>{{ filteredUniversities.length }}</strong> dari {{ totalUniversities }} universitas
              </div>
              <div class="d-flex gap-2 align-items-center">
                <select v-model="sortBy" @change="sortResults" class="form-select" style="width: 180px; height: 38px; font-size: 0.9rem;">
                  <option value="name">Nama A-Z</option>
                  <option value="ranking">Ranking</option>
                  <option value="tuition-low">Biaya Terendah</option>
                  <option value="tuition-high">Biaya Tertinggi</option>
                </select>
                <div class="btn-group" role="group" style="height: 38px;">
                  <button
                    type="button"
                    @click="viewMode = 'grid'"
                    :class="['btn', viewMode === 'grid' ? 'btn-primary' : 'btn-outline-primary']"
                  >
                    ‚äû
                  </button>
                  <button
                    type="button"
                    @click="viewMode = 'list'"
                    :class="['btn', viewMode === 'list' ? 'btn-primary' : 'btn-outline-primary']"
                  >
                    ‚ò∞
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- University Cards -->
          <div v-if="!loading" :class="['row', viewMode === 'grid' ? 'g-4' : '']">
            <div
              v-for="university in paginatedUniversities"
              :key="university.id"
              :class="viewMode === 'grid' ? 'col-md-6 col-lg-6' : 'col-12'"
              @click="viewUniversityDetail(university.id)"
            >
              <div :class="['card', 'h-100', 'border-0', 'shadow-sm', 'cursor-pointer', { 'card-list': viewMode === 'list', 'card-grid': viewMode === 'grid' }]">
                <div v-if="viewMode === 'grid'" class="position-relative overflow-hidden" style="height: 200px;">
                  <img :src="university.image" :alt="university.name" class="card-img-top" style="object-fit: cover; height: 100%;">
                  <div class="position-absolute top-0 end-0 p-2 d-flex gap-2">
                    <span v-if="university.ranking" class="badge bg-primary">{{ university.ranking }}</span>
                    <span v-if="university.hasScholarship" class="badge bg-warning text-dark">üí∞ Beasiswa</span>
                  </div>
                </div>
                <div :class="['card-body', viewMode === 'list' ? 'd-flex justify-content-between align-items-start' : '']">
                  <div :class="viewMode === 'list' ? 'flex-grow-1' : ''">
                    <h5 class="card-title text-primary fw-bold">{{ university.name }}</h5>
                    <div class="mb-2">
                      <small class="text-muted">üìç {{ university.location }}</small>
                      <br>
                      <small class="text-muted">üèõÔ∏è {{ university.type }}</small>
                    </div>
                    <p class="card-text small text-muted mb-2">{{ university.description }}</p>
                    <div class="mb-2">
                      <span v-if="university.hasEnglishProgram" class="badge bg-light text-dark me-2 mb-1">üåç Program Bahasa Inggris</span>
                      <span v-if="university.hasDormitory" class="badge bg-light text-dark me-2 mb-1">üè† Asrama</span>
                      <span v-if="university.hasLanguageInstitute" class="badge bg-light text-dark mb-1">üó£Ô∏è Institut Bahasa</span>
                    </div>
                    <div class="alert alert-info py-2 px-3 mb-3" style="font-size: 0.9rem;">
                      <strong>Biaya per semester:</strong><br>
                      {{ formatCurrency(university.tuitionMin) }} - {{ formatCurrency(university.tuitionMax) }}
                    </div>
                    <div class="d-flex gap-2">
                      <button @click.stop="viewUniversityDetail(university.id)" class="btn btn-primary btn-sm">
                        Lihat Detail
                      </button>
                      <button @click.stop="toggleFavorite(university.id)" class="btn btn-outline-primary btn-sm">
                        {{ isFavorite(university.id) ? '‚ù§Ô∏è' : 'ü§ç' }}
                      </button>
                    </div>
                  </div>
                  <div v-if="viewMode === 'list'" class="ms-3 flex-shrink-0">
                    <img :src="university.image" :alt="university.name" class="rounded" style="width: 100px; height: 100px; object-fit: cover;">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pagination -->
          <div v-if="!loading && totalPages > 1" class="d-flex justify-content-center align-items-center gap-3 mt-5">
            <button
              @click="currentPage--"
              :disabled="currentPage === 1"
              class="btn btn-outline-primary"
            >
              ‚Üê Sebelumnya
            </button>
            <span class="text-muted">
              Halaman {{ currentPage }} dari {{ totalPages }}
            </span>
            <button
              @click="currentPage++"
              :disabled="currentPage === totalPages"
              class="btn btn-outline-primary"
            >
              Selanjutnya ‚Üí
            </button>
          </div>
        </div>
      </div>

    </div>
  </section>
</div>
